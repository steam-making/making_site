{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h4 class="mb-3">
    <i class="bi bi-robot"></i> ìë™ ë¸”ë¡œê·¸ ê³µì¥
  </h4>

  <!-- ğŸ”¹ ê¸€ ìë™ ìƒì„± í¼ -->
  <form method="post" action="{% url 'blog_auto:generate_post' %}" class="card card-body mb-4">
    {% csrf_token %}
    <div class="row g-2">
      <div class="col-md-4">
        <label class="form-label">ì£¼ì œ</label>
        <input type="text" name="topic" class="form-control" placeholder="ì˜ˆ) AI ìê²©ì¦ AICEê°€ í•„ìš”í•œ ì´ìœ " required>
      </div>
      <div class="col-md-3">
        <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
        <select name="category" class="form-select">
          {% for value,label in categories %}
            <option value="{{ value }}">{{ label }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">í”Œë«í¼</label>
        <select name="platform" class="form-select">
          <option value="both">ë„¤ì´ë²„ + í‹°ìŠ¤í† ë¦¬</option>
          <option value="naver">ë„¤ì´ë²„ë§Œ</option>
          <option value="tistory">í‹°ìŠ¤í† ë¦¬ë§Œ</option>
        </select>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <div class="form-check me-3">
          <input class="form-check-input" type="checkbox" name="generate_image" id="generateImageCheck" checked>
          <label class="form-check-label" for="generateImageCheck">
            ì¸ë„¤ì¼ ìƒì„±
          </label>
        </div>
        <button class="btn btn-primary ms-auto">
          <i class="bi bi-magic"></i> ìë™ ìƒì„±
        </button>
      </div>
    </div>
  </form>

  <!-- ğŸ”¹ ìµœê·¼ ìƒì„± ê¸€ ë¦¬ìŠ¤íŠ¸ -->
  <h5 class="mb-2">ìµœê·¼ ìƒì„±ëœ ê¸€</h5>
  <table class="table table-sm table-hover">
    <thead class="table-light">
      <tr>
        <th>ì œëª©</th>
        <th>ì¹´í…Œê³ ë¦¬</th>
        <th>í”Œë«í¼</th>
        <th>ìƒíƒœ</th>
        <th>ì˜ˆì•½ì‹œê°„</th>
        <th>ë°œí–‰</th>
      </tr>
    </thead>
    <tbody>
      {% for post in posts %}
      <tr>
        <td>
          <a href="{% url 'blog_auto:preview' post.id %}">
            {{ post.main_title }}
          </a>
        </td>
        <td>{{ post.get_category_display }}</td>
        <td>
          {% if post.platform == 'both' %}ë„¤ì´ë²„+í‹°ìŠ¤í† ë¦¬
          {% elif post.platform == 'naver' %}ë„¤ì´ë²„
          {% else %}í‹°ìŠ¤í† ë¦¬{% endif %}
        </td>
        <td>{{ post.get_status_display }}</td>
        <td>{{ post.publish_at|default:"-" }}</td>
        <td>
          <form method="post" action="{% url 'blog_auto:publish_now' post.id %}">
            {% csrf_token %}
            <button class="btn btn-sm btn-success">
              <i class="bi bi-upload"></i> ì¦‰ì‹œë°œí–‰
            </button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted">ì•„ì§ ìƒì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
