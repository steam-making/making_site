{% extends "base.html" %}
{% block content %}
<div class="container mt-4">

    <!-- ğŸ”· ì œëª© + ì¶œê°• ë“±ë¡ ë²„íŠ¼ -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">ì¶œê°• í•™êµ/ê¸°ê´€ ëª©ë¡</h4>
        <a href="{% url 'add_institution' %}" class="btn btn-primary">+ ì¶œê°• ë“±ë¡</a>
    </div>

    {% if request.user.is_superuser %}
    <!-- ğŸ”· í•„í„° í¼ -->
    <form method="get" class="row mb-3">
        <div class="col-auto">
            <select name="teacher" class="form-select">
                <option value="">ì „ì²´ ê°•ì‚¬</option>
                {% for t in teachers %}
                    <option value="{{ t.id }}" {% if selected_teacher_id == t.id %}selected{% endif %}>
                        {{ t.first_name }} ({{ t.username }})
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-outline-primary">í•„í„°</button>
        </div>
    </form>
    {% endif %}

    <!-- ğŸ”· ì¶œê°• ì •ë³´ í…Œì´ë¸” -->
    <table class="table table-bordered text-center align-middle">
        <thead class="table-light">
            <tr>
                <th>ê°•ì‚¬</th>
                <th>í•™êµ/ê¸°ê´€ëª…</th>
                <th>í”„ë¡œê·¸ë¨</th>
                <th>ìš”ì¼</th>
                <th>ë“±ë¡ì¼</th>
                <th>ìˆ˜ì •/ì‚­ì œ</th>
            </tr>
        </thead>
        <tbody>
            {% for i in institutions %}
            <tr>
                <td>{{ i.teacher.first_name }}</td>
                <td>
                    {% if i.school %}
                        {{ i.school.name }}
                    {% else %}
                        {{ i.name }}
                    {% endif %}
                </td>
                <td>{{ i.program }}</td>
                <td>
                {% for day in i.days.all %}
                    {% if day.code == 'ì›”' %}
                    <span class="badge bg-danger me-1">{{ day.name }}</span>
                    {% elif day.code == 'í™”' %}
                    <span class="badge bg-primary me-1">{{ day.name }}</span>
                    {% elif day.code == 'ìˆ˜' %}
                    <span class="badge bg-success me-1">{{ day.name }}</span>
                    {% elif day.code == 'ëª©' %}
                    <span class="badge bg-warning text-dark me-1">{{ day.name }}</span>
                    {% elif day.code == 'ê¸ˆ' %}
                    <span class="badge bg-info text-dark me-1">{{ day.name }}</span>
                    {% elif day.code == 'í† ' %}
                    <span class="badge bg-secondary me-1">{{ day.name }}</span>
                    {% elif day.code == 'ì¼' %}
                    <span class="badge bg-dark me-1">{{ day.name }}</span>
                    {% else %}
                    <span class="badge bg-light text-dark me-1">{{ day.name }}</span>
                    {% endif %}
                {% endfor %}
                </td>

                <td>{{ i.created_at|date:"Y-m-d" }}</td>
                <td>
                    {% if i.id %}
                    <a href="{% url 'institution_update' i.id %}" class="btn btn-sm btn-warning">ìˆ˜ì •</a>
                    {% endif %}
                </td>

            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-muted">ì¶œê°• ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
