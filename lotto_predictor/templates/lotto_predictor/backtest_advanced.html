{% extends "base.html" %}
{% load humanize %}
{% block content %}
<div class="container mt-4">

  <h4>ğŸ†• Recent60 ë¶€ìŠ¤íŒ… ë°±í…ŒìŠ¤íŠ¸</h4>

  <form class="row g-2 mb-3" method="get" action="">
    <div class="col-auto">
      <label for="draw_no" class="col-form-label">íšŒì°¨ ì„ íƒ</label>
    </div>
    <div class="col-auto">
      <input type="number" min="2" max="{{ max_draw }}" class="form-control" id="draw_no" name="draw_no"
             value="{{ selected_draw|default:max_draw }}">
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-danger">Recent60 ì‹¤í–‰</button>
    </div>
    <div class="col-auto">
      <a href="{% url 'lotto_recommend' %}" class="btn btn-outline-secondary">ì¶”ì²œ í˜ì´ì§€</a>
    </div>
  </form>

  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% else %}

  <div class="card mb-3 border-danger">
    <div class="card-body">
      <h6 class="card-title mb-2">ğŸ¯ {{ selected_draw }}íšŒì°¨ ì‹¤ì œ ë‹¹ì²¨ë²ˆí˜¸</h6>
      <p class="mb-0">
        {% for n in actual %}
          <span class="badge bg-success">{{ n }}</span>
        {% endfor %}
      </p>
    </div>
  </div>

  <h5 class="mt-4 text-danger">ì¶”ì²œ 10ì„¸íŠ¸ & ì ì¤‘ í˜„í™© (Recent60)</h5>
  <ul class="list-group mb-4">
    {% for r in results %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <span class="badge bg-danger me-2">ì„¸íŠ¸ {{ r.rank }}</span>
          {% for n in r.numbers %}
            {% if n in actual %}
              <span class="badge bg-primary">{{ n }}</span>
            {% else %}
              <span class="badge bg-secondary">{{ n }}</span>
            {% endif %}
          {% endfor %}
          <span class="ms-2">
            <strong class="text-success">ğŸ¯ {{ r.hit_cnt }}ê°œ</strong>
            {% if r.hit_cnt > 0 %}
              <small class="text-muted">(
                {% for h in r.hit_nums %}
                  {{ h }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
              )</small>
            {% endif %}
          </span>
        </div>
      </li>
    {% endfor %}
  </ul>

  <div class="alert alert-warning small mt-4">
    <div>â€¢ ì•Œê³ ë¦¬ì¦˜: <strong>ìµœê·¼ 60íšŒ ë¹ˆë„ ê¸°ë°˜</strong> + <strong>ë¯¸ì¶œí˜„ ë³´ì •(0.3)</strong> + <strong>Shape(í•© 155Â±15)</strong> í•„í„°</div>
    <div>â€¢ ëª©í‘œ: <strong>ë¹ ë¥¸ ìˆ˜ë ´ + ê³ ë¹ˆë„/ë¯¸ì¶œí˜„ ê· í˜•</strong>ìœ¼ë¡œ í˜„ì‹¤ì  ì ì¤‘ ê°€ëŠ¥ì„± ê·¹ëŒ€í™”</div>
  </div>

  {% endif %}
</div>
{% endblock %}
