{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- ğŸ”¹ í—¤ë” ì¹´ë“œ -->
  <div class="card shadow-sm mb-4">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h4 class="mb-1">
          <i class="bi bi-journal-text me-1 text-primary"></i>
          ì»¤ë¦¬í˜ëŸ¼ í”„ë¡œê·¸ë¨ ëª©ë¡
        </h4>
        <small class="text-muted">
          ìˆ˜ì—…ì— ì‚¬ìš©ë  ì»¤ë¦¬í˜ëŸ¼ í”„ë¡œê·¸ë¨ì„ ê´€ë¦¬í•©ë‹ˆë‹¤
        </small>
      </div>

        {% if request.user.is_staff %}
            <a href="{% url 'curriculum_program_create' %}"
            class="btn btn-primary">
            <i class="bi bi-plus-circle me-1"></i>
            ì»¤ë¦¬í˜ëŸ¼ ë“±ë¡
            </a>
        {% endif %}
    </div>
  </div>

  <!-- ğŸ”¹ ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸” -->
  <div class="card shadow-sm">
    <div class="card-body p-0">

      <table class="table table-hover table-bordered table-stack mb-0 align-middle">
        <thead class="table-light">
          <tr>
            <th style="width:22%" class="text-center">í”„ë¡œê·¸ë¨ëª…</th>
            <th class="text-center">ì†Œê°œ</th>
            <th style="width:18%" class="text-center">ëŒ€ìƒ</th>
            <th style="width:200px" class="text-center">ê´€ë¦¬</th>
          </tr>
        </thead>

        <tbody>
          {% for program in programs %}
          <tr>
            <!-- í”„ë¡œê·¸ë¨ëª… -->
            <td data-label="í”„ë¡œê·¸ë¨ëª…" class="text-center">
              <strong>{{ program.name }}</strong>
            </td>

            <!-- ì†Œê°œ -->
            <td data-label="ì†Œê°œ" class="text-muted">
              {% if program.description %}
                {{ program.description|linebreaksbr }}
              {% else %}
                <span class="text-muted fst-italic">
                  <i class="bi bi-dash-circle"></i> ì†Œê°œ ì—†ìŒ
                </span>
              {% endif %}
            </td>

            <!-- ëŒ€ìƒ -->
            <td data-label="ëŒ€ìƒ" class="text-center">
              {% if program.target_start or program.target_end %}
                <span class="badge bg-light text-dark border">
                  <i class="bi bi-people me-1"></i>
                  {{ program.target_start }}
                  {% if program.target_end %} ~ {{ program.target_end }}{% endif %}
                </span>
              {% else %}
                <span class="text-muted">
                  <i class="bi bi-dash-circle"></i> ë¯¸ì§€ì •
                </span>
              {% endif %}
            </td>

            <!-- ê´€ë¦¬ -->
            <td class="text-center" data-label="ê´€ë¦¬">

                <!-- âœ… ì°¨ì‹œ ë³´ê¸° : ë¡œê·¸ì¸í•œ ëª¨ë“  ì‚¬ìš©ì -->
                <a href="{% url 'curriculum_syllabus_list' program.id %}"
                    class="btn btn-sm btn-outline-primary me-1"
                    title="ì°¨ì‹œ ë³´ê¸°">
                    <i class="bi bi-list-ol"></i>
                    <span class="d-none d-md-inline">ìˆ˜ì—…ê³„íšì„œ</span>
                </a>

                <!-- âœ… ìˆ˜ì • : ê´€ë¦¬ì/ìŠ¤íƒœí”„ë§Œ -->
                {% if request.user.is_staff %}
                    <a href="{% url 'curriculum_program_update' program.id %}"
                    class="btn btn-sm btn-outline-secondary"
                    title="ì»¤ë¦¬í˜ëŸ¼ ìˆ˜ì •">
                    <i class="bi bi-pencil-square"></i>
                    <span class="d-none d-md-inline">ìˆ˜ì •</span>
                    </a>
                {% endif %}

            </td>

          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted py-4">
              <i class="bi bi-inbox fs-4 d-block mb-2"></i>
              ë“±ë¡ëœ ì»¤ë¦¬í˜ëŸ¼ í”„ë¡œê·¸ë¨ì´ ì—†ìŠµë‹ˆë‹¤.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>

</div>

{% endblock %}
