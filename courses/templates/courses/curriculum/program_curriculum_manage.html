{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- ğŸ”¹ í—¤ë” ì¹´ë“œ -->
  <div class="card shadow-sm mb-4">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h4 class="mb-1">
          <i class="bi bi-list-ol text-primary me-1"></i>
          {{ program.name }}
        </h4>
        <small class="text-muted">
          ì»¤ë¦¬í˜ëŸ¼ ì°¨ì‹œ(ìˆ˜ì—…ê³„íšì„œ) ê´€ë¦¬
        </small>
      </div>

      {% if request.user.is_staff %}
        <div class="d-flex">
            <a href="{% url 'curriculum_syllabus_create' program.id %}"
            class="btn btn-primary btn-sm me-2">
            <i class="bi bi-plus-circle me-1"></i>
            ì°¨ì‹œ ì¶”ê°€
            </a>

            <a href="{% url 'curriculum_syllabus_excel_upload' program.id %}"
            class="btn btn-outline-success btn-sm">
            <i class="bi bi-file-earmark-excel me-1"></i>
            ì—‘ì…€ ë“±ë¡
            </a>
        </div>
      {% endif %}

    </div>
  </div>

  <!-- ğŸ”¹ ì°¨ì‹œ í…Œì´ë¸” ì¹´ë“œ -->
  <div class="card shadow-sm">
    <div class="card-body p-0">

      <table class="table table-bordered table-hover table-stack mb-0">
        <thead class="table-light">
          <tr>
            <th style="width:80px">ì°¨ì‹œ</th>
            <th style="width:30%">ì£¼ì œ</th>
            <th>ìˆ˜ì—… ë‚´ìš©</th>
            {% if request.user.is_staff %}
                <th style="width:140px" class="text-center">ê´€ë¦¬</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for s in syllabus_list %}
          <tr>
            <td data-label="ì°¨ì‹œ">
              <span class="badge bg-secondary">
                {{ s.week }}ì°¨ì‹œ
              </span>
            </td>

            <td data-label="ì£¼ì œ" class="fw-semibold">
              {{ s.title }}
            </td>

            <td data-label="ìˆ˜ì—… ë‚´ìš©" class="text-muted">
              {{ s.content|truncatechars:60 }}
            </td>

            {% if request.user.is_staff %}
                <td class="text-center" data-label="ê´€ë¦¬">
                <a href="{% url 'curriculum_syllabus_update' s.id %}"
                    class="btn btn-sm btn-outline-secondary me-1">
                    <i class="bi bi-pencil"></i>
                </a>

                <a href="{% url 'curriculum_syllabus_delete' s.id %}"
                    class="btn btn-sm btn-outline-danger"
                    onclick="return confirm('ì´ ì°¨ì‹œë¥¼ ì‚­ì œí• ê¹Œìš”?')">
                    <i class="bi bi-trash"></i>
                </a>
                </td>
            {% endif %}

            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted py-4">
              <i class="bi bi-info-circle me-1"></i>
              ë“±ë¡ëœ ì°¨ì‹œ(ìˆ˜ì—…ê³„íšì„œ)ê°€ ì—†ìŠµë‹ˆë‹¤.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>

  <!-- ğŸ”¹ í•˜ë‹¨ ë„¤ë¹„ -->
  <div class="mt-3">
    <a href="{% url 'curriculum_program_list' %}"
       class="btn btn-outline-secondary btn-sm">
      <i class="bi bi-arrow-left"></i>
      ì»¤ë¦¬í˜ëŸ¼ í”„ë¡œê·¸ë¨ ëª©ë¡ìœ¼ë¡œ
    </a>
  </div>

</div>

{% endblock %}
