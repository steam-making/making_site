{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>거래처 목록</h3>
    <div>
      <a href="{% url 'vendor_create' %}" class="btn btn-success">➕ 거래처 등록</a>
      <a href="{% url 'vendor_type_list' %}" class="btn btn-secondary">종류 관리</a>
    </div>
  </div>

  <!-- 종류 필터링 -->
  <form method="get" class="mb-4 d-flex align-items-center gap-2">
    <label for="type" class="form-label mb-0">종류:</label>
    <select name="type" id="type" class="form-select" style="max-width: 200px;" onchange="this.form.submit()">
      <option value="">전체</option>
      {% for type in vendor_types %}
        <option value="{{ type.id }}" {% if type.id|stringformat:"s" == selected_type_id %}selected{% endif %}>
          {{ type.name }}
        </option>
      {% endfor %}
    </select>
  </form>

  <table class="table table-hover table-bordered text-center align-middle">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>종류</th>
        <th>거래처명</th>
        <th>연락처</th>
        <th>주소</th>
        <th>관리</th>
      </tr>
    </thead>
    <tbody>
      {% for vendor in vendors %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ vendor.vendor_type.name }}</td>
        <td>{{ vendor.name }}</td>
        <td>{{ vendor.contact }}</td>
        <td>{{ vendor.address }}</td>
        <td>
          <a href="{% url 'vendor_update' vendor.id %}" class="btn btn-sm btn-warning">수정</a>
          <a href="{% url 'vendor_delete' vendor.id %}" class="btn btn-sm btn-danger">삭제</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center">등록된 거래처가 없습니다.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
